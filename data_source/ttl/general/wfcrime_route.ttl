# @Author(s): Eric Top, Haiqi Xu, Simon Scheider, 
@prefix ccd: <http://geographicknowledge.de/vocab/CoreConceptData.rdf#> .
@prefix cct: <https://github.com/quangis/cct#> .
@prefix data: <https://github.com/quangis/cct/blob/master/tools/data.ttl#> .
@prefix dct: <http://purl.org/dc/terms/> .
@prefix rdfs: <http://www.w3.org/2000/01/rdf-schema#> .
@prefix tools: <https://github.com/quangis/cct/blob/master/tools/tools.ttl#> .
@prefix wf: <http://geographicknowledge.de/vocab/Workflow.rdf#> .

tools:wfcrime_route a wf:Workflow ;
    wf:edge data:n26,
        data:n32 ;
    wf:source data:home,
        data:roads,
        data:work_sport_store_locations ;
    rdfs:comment "what is the shortest path along my home, my workplace, a gym and a supermarket in Amsterdam?" .

data:n10 wf:applicationOf tools:MakeRouteAnalysisLayer ;
    wf:input2 data:network ;
    wf:output data:route_analysis_layer ;
    rdfs:comment "Create a route analysis layer" .

data:n12 wf:applicationOf tools:AddLocations ;
    wf:input2 data:route_analysis_layer ;
    wf:input3 data:home ;
    wf:output data:route_analysis_layer_home ;
    rdfs:comment "Add a home location to the route analysis layer" .

data:n13 wf:applicationOf tools:AddLocations ;
    wf:input2 data:route_analysis_layer_home ;
    wf:input4 data:work_sport_store_locations ;
    wf:output data:route_analysis_layer_all ;
    rdfs:comment "Add a work, a sport, and a store location to the route analysis layer" .

data:n16 wf:applicationOf tools:Solve ;
    wf:input1 data:route_analysis_layer_all ;
    wf:output data:route_analysis_layer_solved ;
    rdfs:comment "Execute the route analysis" .

data:n2 wf:applicationOf tools:CreateNetworkDataset ;
    wf:input1 data:roads ;
    wf:output data:network_dataset ;
    rdfs:comment "Create a network dataset layer" .

data:n26 wf:applicationOf tools:BuildNetwork ;
    wf:input1 data:roads ;
    wf:output data:network ;
    cct:expression "['nbuild (1: ObjectInfo(Ratio))']" .

data:n32 wf:applicationOf tools:RouteAnalysis ;
    wf:input1 data:network ;
    wf:input2 data:home ;
    wf:input3 data:work_sport_store_locations ;
    wf:output data:route_analysis_layer_solved ;
    cct:expression "['1: Network(Ratio);\\n2: ObjectInfo(Nom);\\n3: ObjectInfo(Nom);        \\n           generateobjectsfromrel (nRoutes (get_attrL 2) (get_attrL 3) 1)']" .

data:n8 wf:applicationOf tools:BuildNetwork ;
    wf:input1 data:network_dataset ;
    wf:output data:network ;
    rdfs:comment "Build a representation of the Amsterdam road network" .

tools:RouteAnalysis a wf:Workflow ;
    wf:edge data:n10,
        data:n12,
        data:n13,
        data:n16 ;
    wf:source data:home,
        data:network,
        data:work_sport_store_locations ;
    dct:subject """1: Network(Ratio);
2: ObjectInfo(Nom);
3: ObjectInfo(Nom);        
           generateobjectsfromrel (nRoutes (get_attrL 2) (get_attrL 3) 1)""" .

data:route_analysis_layer_solved a ccd:LineA,
        ccd:NominalA,
        ccd:ObjectQ .

tools:BuildNetwork a wf:Workflow ;
    wf:edge data:n2,
        data:n8 ;
    wf:source data:roads ;
    dct:subject "nbuild (1: ObjectInfo(Ratio))" .

data:home a ccd:ObjectQ,
        ccd:PointA ;
    rdfs:comment "Point location of a home address" .

data:roads a ccd:LineA,
        ccd:ObjectQ,
        ccd:RatioA ;
    rdfs:comment "A line dataset representing roads in Amsterdam" .

data:work_sport_store_locations a ccd:ObjectQ,
        ccd:PointA ;
    rdfs:comment "Points representing work, sport and store locations" .

data:network a ccd:LineA,
        ccd:NetworkQ,
        ccd:RatioA .

