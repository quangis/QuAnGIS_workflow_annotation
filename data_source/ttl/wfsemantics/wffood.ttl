# @Author(s): Eric Top
@prefix ccd: <http://geographicknowledge.de/vocab/CoreConceptData.rdf#> .
@prefix cct: <https://github.com/quangis/cct#> .
@prefix data: <https://github.com/quangis/cct/blob/master/tools/data.ttl#> .
@prefix dbo: <https://dbpedia.org/ontology/> .
@prefix dct: <http://purl.org/dc/terms/> .
@prefix rdfs: <http://www.w3.org/2000/01/rdf-schema#> .
@prefix repo: <https://example.com/#> .
@prefix tools: <https://github.com/quangis/cct/blob/master/tools/tools.ttl#> .
@prefix wf: <http://geographicknowledge.de/vocab/Workflow.rdf#> .

repo:wffood a wf:Workflow ;
    wf:edge data:wffood_n10,
        data:wffood_n12,
        data:wffood_n14,
        data:wffood_n16,
        data:wffood_n20,
        data:wffood_n22,
        data:wffood_n24,
        data:wffood_n26,
        data:wffood_n28,
        data:wffood_n30,
        data:wffood_n32,
        data:wffood_n34,
        data:wffood_n36,
        data:wffood_n38,
        data:wffood_n40,
        data:wffood_n42,
        data:wffood_n44,
        data:wffood_n46,
        data:wffood_n48,
        data:wffood_n50,
        data:wffood_n52,
        data:wffood_n54 ;
    dct:subject "" ;
    rdfs:comment "Question" ;
    dbo:abstract "Abstract" .

data:wffood_Amsterdam_buildings a ccd:ObjectQ ;
    a ccd:VectorTessellationA ;
    rdfs:comment "Vector polygon data of buildings with their functions as attributes" .

data:wffood_n10 wf:applicationOf tools:FeatureClassToFeatureClass ;
    wf:input1 data:wffood_Amsterdam_boundaries ;
    wf:output data:wffood_Amsterdam_centrum ;
    cct:expression "subset (1: ObjectInfo(Nom)) (-: C(Nom))" .

data:wffood_n12 wf:applicationOf tools:FeatureClassToFeatureClass ;
    wf:input1 data:wffood_Amsterdam_boundaries ;
    wf:output data:wffood_Amsterdam_north ;
    cct:expression "subset (1: ObjectInfo(Nom)) (-: C(Nom))" .

data:wffood_n14 wf:applicationOf tools:SelectLayerByAttribute ;
    wf:input1 data:wffood_Amsterdam_buildings ;
    wf:output data:wffood_function_mix ;
    cct:expression "subset (1: ObjectInfo(Nom)) (-: C(Nom))" .

data:wffood_n16 wf:applicationOf tools:FeatureToPoint ;
    wf:input1 data:wffood_function_mix ;
    wf:output data:wffood_households .

data:wffood_n20 wf:applicationOf tools:SelectLayerByLocation ;
    wf:input1 data:wffood_Amsterdam_centrum ;
    wf:input2 data:wffood_supermarkets ;
    wf:output data:wffood_supermarkets_centrum_select .

data:wffood_n22 wf:applicationOf tools:CopyFeatures ;
    wf:input1 data:wffood_supermarkets_centrum_select ;
    wf:output data:wffood_supermarkets_centrum .

data:wffood_n24 wf:applicationOf tools:SelectLayerByLocation ;
    wf:input1 data:wffood_Amsterdam_centrum ;
    wf:input2 data:wffood_households ;
    wf:output data:wffood_households_centrum_select .

data:wffood_n26 wf:applicationOf tools:CopyFeatures ;
    wf:input1 data:wffood_households_centrum_select ;
    wf:output data:wffood_households_centrum .

data:wffood_n28 wf:applicationOf tools:SelectLayerByLocation ;
    wf:input1 data:wffood_Amsterdam_north ;
    wf:input2 data:wffood_households ;
    wf:output data:wffood_households_north_select .

data:wffood_n30 wf:applicationOf tools:CopyFeatures ;
    wf:input1 data:wffood_households_north_select ;
    wf:output data:wffood_households_north .

data:wffood_n32 wf:applicationOf tools:SelectLayerByLocation ;
    wf:input1 data:wffood_Amsterdam_north ;
    wf:input2 data:wffood_supermarkets ;
    wf:output data:wffood_supermarkets_north_select .

data:wffood_n34 wf:applicationOf tools:CopyFeatures ;
    wf:input1 data:wffood_supermarkets_north_select ;
    wf:output data:wffood_supermarkets_north .

data:wffood_n36 wf:applicationOf tools:MakeClosestFacilityAnalysisLayer ;
    wf:input1 data:wffood_roads ;
    wf:output data:wffood_NL_network_north .

data:wffood_n38 wf:applicationOf tools:AddLocations ;
    wf:input1 data:wffood_supermarkets_north ;
    wf:input2 data:wffood_NL_network_north ;
    wf:output data:wffood_NL_network_north_supermarkets .

data:wffood_n40 wf:applicationOf tools:AddLocations ;
    wf:input1 data:wffood_households_north ;
    wf:input2 data:wffood_NL_network_north_supermarkets ;
    wf:output data:wffood_NL_network_north_supermarkets_households .

data:wffood_n42 wf:applicationOf tools:Solve ;
    wf:input1 data:wffood_NL_network_north_supermarkets_households ;
    wf:output data:wffood_NL_network_north_supermarkets_households_solved .

data:wffood_n44 wf:applicationOf tools:SummaryStatistics ;
    wf:input1 data:wffood_NL_network_north_supermarkets_households_solved ;
    wf:output data:wffood_summary_north ;
    cct:expression """        1: ObjectInfo(Ratio);     
            (avg (getamounts 1))          """ .

data:wffood_n46 wf:applicationOf tools:MakeClosestFacilityAnalysisLayer ;
    wf:input1 data:wffood_roads ;
    wf:output data:wffood_NL_network_centrum .

data:wffood_n48 wf:applicationOf tools:AddLocations ;
    wf:input1 data:wffood_supermarkets_centrum ;
    wf:input2 data:wffood_NL_network_centrum ;
    wf:output data:wffood_NL_network_centrum_supermarkets .

data:wffood_n50 wf:applicationOf tools:AddLocations ;
    wf:input1 data:wffood_households_centrum ;
    wf:input2 data:wffood_NL_network_centrum_supermarkets ;
    wf:output data:wffood_NL_network_centrum_supermarkets_households .

data:wffood_n52 wf:applicationOf tools:Solve ;
    wf:input1 data:wffood_NL_network_centrum_supermarkets_households ;
    wf:output data:wffood_NL_network_centrum_supermarkets_households_solved .

data:wffood_n54 wf:applicationOf tools:SummaryStatistics ;
    wf:input1 data:wffood_NL_network_centrum_supermarkets_households_solved ;
    wf:output data:wffood_summary_centrum ;
    cct:expression """        1: ObjectInfo(Ratio);     
            (avg (getamounts 1))          """ .

data:wffood_summary_centrum a ccd:RatioA .

data:wffood_summary_north a ccd:RatioA .

data:wffood_Amsterdam_boundaries a ccd:VectorTessellationA ;
    a ccd:ObjectQ ;
    rdfs:comment "The boundaries of the Amsterdam district as vector polygons" .

data:wffood_NL_network_centrum_supermarkets_households_solved a ccd:ObjectQ ;
    a ccd:PointA ;
    a ccd:RatioA .

data:wffood_NL_network_north_supermarkets_households_solved a ccd:PointA ;
    a ccd:RatioA ;
    a ccd:ObjectQ .

data:wffood_households_centrum a ccd:ObjectQ ;
    a ccd:PointA .

data:wffood_households_north a ccd:ObjectQ ;
    a ccd:PointA .

data:wffood_roads a ccd:ObjectQ ;
    a ccd:LineA ;
    rdfs:comment "Line dataset representing roads in the Netherlands" .

data:wffood_supermarkets a ccd:ObjectQ ;
    a ccd:PointA ;
    rdfs:comment "Point locations representing supermarkets" .

data:wffood_supermarkets_centrum a ccd:ObjectQ ;
    a ccd:PointA .

data:wffood_supermarkets_north a ccd:ObjectQ ;
    a ccd:PointA .

data:wffood_Amsterdam_centrum a ccd:PlainVectorRegionA ;
    a ccd:ObjectQ .

data:wffood_Amsterdam_north a ccd:PlainVectorRegionA ;
    a ccd:ObjectQ .

data:wffood_households a ccd:ObjectQ ;
    a ccd:PointA .

