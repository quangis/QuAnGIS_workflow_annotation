# @Author(s): Eric Top
@prefix data: <https://github.com/quangis/cct/blob/master/tools/data.ttl#> .
@prefix dbo: <https://dbpedia.org/ontology/> .
@prefix dct: <http://purl.org/dc/terms/> .
@prefix rdfs: <http://www.w3.org/2000/01/rdf-schema#> .
@prefix repo: <https://example.com/#> .
@prefix tools: <https://github.com/quangis/cct/blob/master/tools/tools.ttl#> .
@prefix wf: <http://geographicknowledge.de/vocab/Workflow.rdf#> .

repo:wfsolar a wf:Workflow ;
    wf:edge data:wfsolar_n0,
        data:wfsolar_n10,
        data:wfsolar_n13,
        data:wfsolar_n15,
        data:wfsolar_n16,
        data:wfsolar_n19,
        data:wfsolar_n20,
        data:wfsolar_n30,
        data:wfsolar_n32,
        data:wfsolar_n37,
        data:wfsolar_n39,
        data:wfsolar_n43,
        data:wfsolar_n46,
        data:wfsolar_n49,
        data:wfsolar_n51 ;
    dct:subject "" ;
    rdfs:comment "How much solar radiation does each rooftop in Glover Park, Washington, D.C., receive throughout the year?" ;
    dbo:abstract "Your nonprofit organization recently launched a pilot program to encourage the residents of the Glover Park neighborhood in Washington, D.C., to install solar panels on their roofs. The goal is for the solar panels to produce a large part of the electric power consumed by each household.In this lesson, you will use ArcGIS Pro to determine how much solar radiation each rooftop in the neighborhood receives throughout the year. Then, you will estimate how much electric power each rooftop (and the neighborhood as a whole) could generate if every suitable building was equipped with solar panels." .

data:wfsolar_n0 wf:applicationOf tools:Slope ;
    wf:input1 data:wfsolar_dsm ;
    wf:output data:wfsolar_dsm_slope ;
    rdfs:comment "Calculate slopes in Glover" .

data:wfsolar_n10 wf:applicationOf tools:Aspect ;
    wf:input1 data:wfsolar_dsm ;
    wf:output data:wfsolar_dsm_aspect ;
    rdfs:comment "Calculate aspects in Glover" .

data:wfsolar_n13 wf:applicationOf tools:RasterCalculator ;
    wf:input1 data:wfsolar_solar_rad ;
    wf:output data:wfsolar_solar_rad_kwh ;
    rdfs:comment "Convert watt-hours to kilowatt hours (Divide by 1000)" .

data:wfsolar_n15 wf:applicationOf tools:Con ;
    wf:input1 data:wfsolar_dsm_slope ;
    wf:input2 data:wfsolar_solar_rad_kwh ;
    wf:output data:wfsolar_dsm_rad_horizontal ;
    rdfs:comment "Get solar radiation where slope VALUE < 45 degrees" .

data:wfsolar_n16 wf:applicationOf tools:Con ;
    wf:input1 data:wfsolar_dsm_rad_horizontal ;
    wf:output data:wfsolar_dsm_rad_horizontal_solar ;
    rdfs:comment "Get solar radiation where VALUE > 800 kWh" .

data:wfsolar_n19 wf:applicationOf tools:Con ;
    wf:input1 data:wfsolar_dsm_aspect ;
    wf:input2 data:wfsolar_dsm_rad_horizontal_solar ;
    wf:input3 data:wfsolar_dsm_rad_flat ;
    wf:output data:wfsolar_dsm_rad_final ;
    rdfs:comment "Get solar radiation where aspect VALUE >= 225 and VALUE <= 3375 or where slope VALUE < 10 degrees" .

data:wfsolar_n20 wf:applicationOf tools:Con ;
    wf:input1 data:wfsolar_dsm_slope ;
    wf:input2 data:wfsolar_dsm_rad_horizontal_solar ;
    wf:output data:wfsolar_dsm_rad_flat ;
    rdfs:comment "get solar ratiation for flat locations (where slope VALUE < 10 degrees)" .

data:wfsolar_n30 wf:applicationOf tools:ZonalStatisticsAsTable ;
    wf:input1 data:wfsolar_buildings ;
    wf:input2 data:wfsolar_dsm_rad_final ;
    wf:output data:wfsolar_solar_buildings ;
    rdfs:comment "Calculate average solar radiation for each building in stand-alone table" .

data:wfsolar_n32 wf:applicationOf tools:AddJoin ;
    wf:input1 data:wfsolar_buildings ;
    wf:input2 data:wfsolar_solar_buildings ;
    wf:output data:wfsolar_solar_buildings_join ;
    rdfs:comment "Join average solar radiation per building with buildings dataset" .

data:wfsolar_n37 wf:applicationOf tools:SelectLayerByAttribute ;
    wf:input1 data:wfsolar_solar_buildings_join ;
    wf:output data:wfsolar_solar_buildings_join_select ;
    rdfs:comment "Select buildings where solar radiation is greater than 30 kWh" .

data:wfsolar_n39 wf:applicationOf tools:FeatureClassToFeatureClass ;
    wf:input1 data:wfsolar_solar_buildings_join_select ;
    wf:output data:wfsolar_solar_buildings_over_30kwh ;
    rdfs:comment "Export selection of buildings where solar radiation is greater than 30 kWh to new layer" .

data:wfsolar_n43 wf:applicationOf tools:AddField ;
    wf:input1 data:wfsolar_solar_buildings_over_30kwh ;
    wf:output data:wfsolar_solar_buildings_over_30kwh_addfield ;
    rdfs:comment "Add field for total amount of solar radiation received per year by each building's usable area." .

data:wfsolar_n46 wf:applicationOf tools:CalculateField ;
    wf:input1 data:wfsolar_solar_buildings_over_30kwh_addfield ;
    wf:output data:wfsolar_solar_buildings_over_30kwh_approx ;
    rdfs:comment "Calculate approximation of total amount of solar radiation received per year by each building's usable area." .

data:wfsolar_n49 wf:applicationOf tools:AddField ;
    wf:input1 data:wfsolar_solar_buildings_over_30kwh_approx ;
    wf:output data:wfsolar_solar_buildings_over_30kwh_approx_addfield ;
    rdfs:comment "Add a field for the electric power production potential" .

data:wfsolar_n51 wf:applicationOf tools:CalculateField ;
    wf:input1 data:wfsolar_solar_buildings_over_30kwh_approx_addfield ;
    wf:output data:wfsolar_solar_buildings_over_30kwh_potential ;
    rdfs:comment "Calculate the electric power production potential" .

data:wfsolar_solar_rad rdfs:comment "Solar radiation per areal unit in Glover Park" .

data:wfsolar_buildings rdfs:comment "Polygonal outline of every building in the Glover Park Neighborhood (Vector)" .

data:wfsolar_dsm rdfs:comment "A digital surface model (raster) of the neighborhood of Glover Park" .

data:wfsolar_solar_buildings_over_30kwh_addfield rdfs:comment "Add field for approximation of total amount of solar radiation received per year by each building's usable area." .

